# Misuzu Music 功能需求文档

## 项目概述

**项目名称**: Misuzu Music
**项目类型**: 本地音乐播放器
**目标平台**: macOS, Windows, Linux
**核心特色**: 日语歌词汉字、片假名的平假名注音功能

## 核心功能需求

### 1. 音乐文件管理
- **文件夹选择**: 用户可选择本地音乐文件夹作为音乐库
- **格式支持**: MP3, FLAC, AAC, WAV, OGG 等常见音频格式
- **元数据解析**: 自动提取歌曲标题、艺术家、专辑、时长等信息
- **封面提取**: 从音频文件中提取专辑封面

### 2. 播放控制
- **基础播放**: 播放、暂停、停止、上一首、下一首
- **进度控制**: 拖拽进度条跳转播放位置
- **音量控制**: 音量调节和静音功能
- **播放模式**: 顺序播放、随机播放、单曲循环、列表循环

### 3. 歌词显示与注音 (核心功能)
- **歌词解析**: 支持 LRC 格式时间轴歌词
- **日语识别**: 自动识别歌词中的日语文本
- **汉字注音**: 为汉字添加平假名注音（振り仮名）
- **片假名注音**: 为片假名添加平假名注音
- **注音显示**:
  - 注音在汉字/片假名上方显示
  - 可开关注音显示
  - 支持注音字体大小调节
- **歌词同步**: 歌词与播放进度实时同步

### 4. 界面设计
- **Apple Music风格**: 参考Apple Music的界面设计语言
- **响应式布局**: 适配不同屏幕尺寸
- **原生外观**: 每个平台使用该平台的原生设计风格
  - macOS: 遵循Apple Human Interface Guidelines
  - Windows: 遵循Fluent Design System
  - Linux: 遵循Material Design或平台常用设计

### 5. 音乐库功能
- **分类浏览**: 按艺术家、专辑、歌曲分类浏览
- **搜索功能**: 支持歌曲、艺术家、专辑搜索
- **播放列表**: 创建和管理自定义播放列表
- **最近播放**: 记录最近播放的歌曲历史

## 技术需求

### 1. 日语处理
- **形态素解析**: 使用MeCab或类似工具进行日语分词
- **读音转换**: 汉字转平假名（如：音楽 → おんがく）
- **片假名转换**: 片假名转平假名（如：ミュージック → みゅーじっく）

### 2. 音频处理
- **音频解码**: 支持多种音频格式的解码
- **音频播放**: 低延迟音频播放引擎
- **音频信息**: 获取音频文件的详细信息

### 3. 文件系统
- **文件监控**: 监控音乐文件夹变化，自动更新音乐库
- **缓存管理**: 缓存歌曲元数据和封面图片
- **设置存储**: 保存用户设置和播放状态

## 用户界面需求

### 主界面布局
```
┌─────────────────────────────────────────────────────┐
│ [导航栏] 资料库 | 播放列表 | 搜索               [设置] │
├─────────────────────────────────────────────────────┤
│ [侧边栏]          │ [主内容区域]                     │
│ • 资料库          │ ┌─────────────────────────────┐   │
│ • 艺术家          │ │ 歌曲列表/专辑网格           │   │
│ • 专辑            │ │                             │   │
│ • 歌曲            │ │                             │   │
│ • 播放列表        │ │                             │   │
│                   │ └─────────────────────────────┘   │
├─────────────────────────────────────────────────────┤
│ [播放控制栏]                                        │
│ [封面] [歌曲信息] [控制按钮] [进度条] [音量] [歌词]  │
└─────────────────────────────────────────────────────┘
```

### 歌词显示界面
```
┌─────────────────────────────────────────────────────┐
│                 [歌词显示区域]                      │
│                                                     │
│          きみ    の    な    まえ                   │
│          君     の    名    前                       │
│                                                     │
│       あした   また  あえる  かな                    │
│       明日    また  会える  かな                     │
│                                                     │
│ [注音开关] [字体大小] [歌词设置]                    │
└─────────────────────────────────────────────────────┘
```

## 性能需求

- **启动时间**: 应用启动时间 < 3秒
- **响应时间**: UI操作响应时间 < 100ms
- **内存使用**: 正常运行内存使用 < 200MB
- **音频延迟**: 播放延迟 < 50ms

## 兼容性需求

- **macOS**: 10.14 Mojave 及以上版本
- **Windows**: Windows 10 及以上版本
- **Linux**: Ubuntu 18.04 LTS 及同等级其他发行版

## 扩展性考虑

- **插件系统**: 预留插件接口用于功能扩展
- **主题系统**: 支持自定义主题和颜色方案
- **国际化**: 支持多语言界面（中文、日文、英文）